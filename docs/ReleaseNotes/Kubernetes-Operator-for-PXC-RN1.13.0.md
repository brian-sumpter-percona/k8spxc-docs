# *Percona Operator for MySQL based on Percona XtraDB Cluster* 1.13.0

* **Date**

   July 7, 2023

* **Installation**

   [Installing Percona Operator for MySQL based on Percona XtraDB Cluster](index.md#quickstart-guides)

## Release Highlights

## New Features

* {{ k8spxcjira(1224) }}: Prevent parallel backups, allow to temporarily disable backup schedule

## Improvements

* {{ k8spxcjira(362) }}: Reliability of ProxySQL & HAProxy checks
* {{ k8spxcjira(1058) }}: Provide name and digest values for Percona Certified Images for non-latest releases
* {{ k8spxcjira(1088) }}: Configurable PXC restore job CPU resources
* {{ k8spxcjira(1166) }}: Create tags for percona-xtradb-cluster-8.0-backup image with PXB version information
* {{ k8spxcjira(1178) }}: Update 'Design and architecture' documentation
* {{ k8spxcjira(1187) }}: Improve 'Quickstart guide' doc	Slava Sarzhan	Pending Release	MERGED	
* {{ k8spxcjira(1189) }}: Update base image for PXC operator 	Unassigned	Pending Release	MERGED	
* {{ k8spxcjira(1190) }}: Update API for RuntimeClass
* {{ k8spxcjira(1192) }}: Improve backup and restore documentation
* {{ k8spxcjira(1202) }}: Set the pmm.serverHost: key to your PMM Server hostname Confusing
* {{ k8spxcjira(1203) }}: kubectl logs cluster1-pxc-node-0 -c pmm-client, Node Name Should be Fixed
* {{ k8spxcjira(1210) }}: Allow configuring HAProxy service as headless
* {{ k8spxcjira(1225) }}: Operator (system) users should be created with the PASSWORD EXPIRE NEVER policy
* {{ k8spxcjira(1248) }}: Fix documentation on using SSL with replication channels
* {{ k8spxcjira(1249) }}: Fix documentation regarding xtrabackup user
* {{ k8spxcjira(1251) }}: Cleanup deprecated methods for io/util
* {{ k8spxcjira(1257) }}: Update all components for backup images
* {{ k8spxcjira(1259) }}: Use official proxysql docker image

## Bugs Fixed

* {{ k8spxcjira(1179) }}: Fix the bug due to which the Operator couldn't use TLS encryption for system users
* {{ k8spxcjira(1188) }}: The database Helm chart has improved defaults, including the use of random passwords generated by the Operator, and disabling `delete-pxc-pvc` and `delete-proxysql-pvc` finalizers to avoid possible data loss during migration
* {{ k8spxcjira(1220) }}: DNS resolution problem forces haproxy to remove all pxc nodes, including alive ones
* {{ k8spxcjira(1164) }}: Fix a bug which caused the Operator to recreate Secrets in case of the ProxySQL to  HAProxy switch with active `delete-proxysql-pvc` finalizer
* {{ k8spxcjira(1255) }}: The log rotation was broken for the audit log, causing it to be written to the old file after the rotation
* {{ k8spxcjira(687) }}: restore not starting after failed restore on another cluster
* {{ k8spxcjira(835) }} and {{ k8spxcjira(1029) }}: Fix the bug which prevented using ProxySQL on the replica cluster in cross-site replication
* {{ k8spxcjira(989) }}: Fix a bug which caused on-demand (manual) backup to fail in IPv6-enabled (dual-stack) environments because fo the backup script unable to figure out the proper Pod IPv4 address (thanks to Song Yang for contribution)
* {{ k8spxcjira(1106) }}: Fix a bug which caused point-in-time recovery failure in case of a corrupted binlog file existence in `/var/lib/mysql`
* {{ k8spxcjira(1122) }}: The new `verifyTLS` PerconaXtraDBClusterRestore Custom Resource option allows to disable verification of the storage server TLS certificate, which may be useful e.g. to skip TLS verification for private S3-compatible storage with a self-issued certificate **IMPROVEMENT** 
* {{ k8spxcjira(1129) }}: Operator doesn't scale PXC pods to original size after PITR restore **NOT REPRODUCIBLE** 
* {{ k8spxcjira(1135) }}: Fix a bug which made it possible for cluster to incorrectly obtain READY status while  the svc EXTERNAL-IP was still in pending state
* {{ k8spxcjira(1149) }}: Pvc finalizer doesn't delete secrets if we use default secret name
* {{ k8spxcjira(1161) }}: pmm stops monitoring haproxy pods after pmmserverkey change
* {{ k8spxcjira(1163) }}: Can't delete cluster in init state if using finalizers
* {{ k8spxcjira(1183) }}: Fresh installation uses mysql_native_password instead of caching_sha2_password
* {{ k8spxcjira(1193) }}: Operator requests cert-manager to generate server certificates with `IsCA: True` set
* {{ k8spxcjira(1197) }}: Backup Finalizer do not correctly delete backups from Azure
* {{ k8spxcjira(1199) }}: Operator can't restore the azure backup if 'spec.backupSource.azure.container' was not specified 
* {{ k8spxcjira(1205) }}: Operator cannot delete backups on s3 with custom TLS
* {{ k8spxcjira(1206) }}: pxc.livenessProbes.timeoutSeconds documentation differs from kubernetes.io
* {{ k8spxcjira(1229) }}: Fix backup deletion from azure
* {{ k8spxcjira(1236) }}: Operator should not print any passwords in logs
* {{ k8spxcjira(1242) }}: pmm-client fails to add MySQL service, password is provided unquoted
* {{ k8spxcjira(1243) }}: pmm agent is not deleted from server inventory on pod termination
* {{ k8spxcjira(1247) }}: main branch - cluster cannot get ready when proxysql exposed with LoadBalancer
* {{ k8spxcjira(1126) }}: helm chart pxc-db should not have backups enabled by default

## Supported Platforms

The following platforms were tested and are officially supported by the Operator
1.13.0:

* [Google Kubernetes Engine (GKE)](https://cloud.google.com/kubernetes-engine) 1.21 - 1.24

* [Amazon Elastic Container Service for Kubernetes (EKS)](https://aws.amazon.com) 1.21 - 1.24

* [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/en-us/services/kubernetes-service/) 1.22 - 1.24

* [OpenShift](https://www.redhat.com/en/technologies/cloud-computing/openshift) 4.10 - 4.11

* [Minikube](https://minikube.sigs.k8s.io/docs/) 1.28

This list only includes the platforms that the Percona Operators are specifically tested on as part of the release process. Other Kubernetes flavors and versions depend on the backward compatibility offered by Kubernetes itself.
